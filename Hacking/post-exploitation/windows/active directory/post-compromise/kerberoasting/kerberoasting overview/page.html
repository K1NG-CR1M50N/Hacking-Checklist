<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Kerberoasting Overview</title>
</head><body><b><u><div style="text-align: center"><span style="font-size: 20pt">Kerberoasting Overview</span></div></u></b><br/>
<br/>
<br/>
<a href="https://medium.com/@Shorty420/kerberoasting-9108477279cc"><span style="font-size: 15pt">https://medium.com/@Shorty420/kerberoasting-9108477279cc<br/>
</span></a><a href="https://medium.com/@Shorty420/kerberoasting-9108477279cc"><span style="font-size: 15pt">https://www.youtube.com/watch?v=qW361k3-BtU</span></a><br/>
<br/>
<br/>
<span style="font-size: 15pt">How Kerberos works:<br/>
We have the Domain Controller (also known as <b>Key Distribution Center</b>) and the User<br/>
&nbsp;(The Application Server has a SPN: Service Principal Name)<br/>
<br/>
1) The User request a <b>TGT (Ticket Granting Ticket)</b>&nbsp;and give the NTLM hash<br/>
<br/>
2) The Domain Controller send a <b>TGT + TGT Kerberos hash<br/>
</b><b><br/>
</b>3) To access the Application Server, the user request a <b>TGS (Ticket Granting Service)</b>,<ul><li style="list-style-type: none">presenting its <b>TGT </b>to the Domain Controller/KDC</li>
<li style="list-style-type: none"></li>
</ul>
4) The Domain Controller send the <b>TGS + Encrypted server account hash</b><ul><li style="list-style-type: none"></li>
</ul>
<br/>
<b><u>And here, Kerberos job stops.</u></b><ul><li style="list-style-type: none"></li>
</ul>
5) The use present to the Application Server (Service),<ul><li style="list-style-type: none">the User present the <b>TGS and the server decrypt it using its own hash:</b></li>
<li style="list-style-type: none">here the server chose if the user is authorized or not</li>
<li style="list-style-type: none"></li>
</ul>
</span><span style="font-size: 15pt">6) The server says back <b>YES</b>&nbsp;or <b>NO</b></span><br/>
<br/>
<br/>
<br/>
<span style="font-size: 15pt">The most important thing to understand is:<br/>
We have a valid user account (User/Pass) that give us a valid TGT<br/>
</span><span style="font-size: 15pt">With the TGT we can request a TGS encrypted + Server Hashes (We can crack those hashes!!)</span><br/>
<img src="1.png" width="950" height="553" /><br/>
<br/>
<br/>
<br/>
<span style="font-size: 15pt">Steps to Kerberoasting:<br/>
</span><span style="font-size: 15pt"><b>1) Get SPNs, Dump Hash: We are requesting a service</b></span><ul><li style="list-style-type: none"><b><span style="font-size: 15pt">Down below there is the TGS with the hash of a server account (E.G. SQLService)</span></b></li>
</ul>
<img src="1 2.png" width="950" height="515" /><br/>
<br/>
<br/>
<br/>
<span style="font-size: 15pt">And we can crack the hash over there, we will get the password of the server account:<br/>
</span><img src="1 3.png" width="950" height="611" /></body></html>